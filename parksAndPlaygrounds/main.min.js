(function(){function k(){if(n){var d=q.value.toLowerCase().split(" "),c,b;for(b=0;b<n.length;b+=1){var a=n[b],e=a.getAttribute("data-park-key"),f=u[e],g=!0;for(c=0;c<d.length;c+=1){var k=d[c];if(!(0<=f.indexOf(k))){var g=!1,h=l[e];if(h){var p;for(p=0;p<h.length;p+=1){var m=r[h[p]];if(m&&0<=m.searchStr.indexOf(k)){g=!0;break}}}if(!g)break}}g?a.removeAttribute("hidden"):a.setAttribute("hidden","hidden")}}}function m(){var t=v[h];Papa.parse(t+".csv",{download:!0,delimiter:",",header:!0,skipEmptyLines:!0,
complete:function(c){d[t]=c.data;h+=1;if(v[h])m();else{for(c=0;c<d.features.length;c+=1){var b=d.features[c];b.searchStr=b.featureName.toLowerCase()+" "+b.keywordList.toLowerCase();r[b.featureKey]=b}delete d.features;for(c=0;c<d.parkFeatures.length;c+=1)b=d.parkFeatures[c],l[b.parkKey]||(l[b.parkKey]=[]),l[b.parkKey].push(b.featureKey);delete d.parkFeatures;c="";for(b=0;b<d.parks.length;b+=1){var a=d.parks[b];u[a.parkKey]=a.parkName.toLowerCase()+" "+a.parkDescription.toLowerCase()+" "+a.locationDescription.toLowerCase();
var e='<div class="list-group-item" data-park-key="'+a.parkKey+'"><div class="d-md-flex justify-content-between"><div><strong>'+a.parkName+"</strong>";""!==a.parkDescription&&(e+="<br />"+a.parkDescription);var f=a.locationMapLink;""===f&&""!==a.locationLatitude&&""!==a.locationLongitude&&(f="https://www.google.com/maps/@"+a.locationLatitude+","+a.locationLongitude+",346m/data=!3m1!1e3");""!==f&&(e+='<br /><i class="fas fa-fw fa-info-circle"></i> <a href="'+f+'" target="_blank">'+(""===a.locationDescription?
"Find on a map":a.locationDescription)+"</a>");""!==a.websiteLink&&(e+='<br /><i class="fas fa-fw fa-globe-americas"></i> <a href="'+a.websiteLink+'" target="_blank">'+(""===a.websiteTitle?"See more":a.websiteTitle)+"</a>");e+="</div>";if(a=l[a.parkKey]){e+='<div class="flex-grow-1 text-right mr-2"><ul class="list-inline" aria-label="Park Features">';for(f=0;f<a.length;f+=1){var g=r[a[f]];g&&(e+='<li class="list-inline-item"><span class="badge badge--logo-blue">'+g.featureName+"</span></li>")}e+=
"</ul></div>"}e+="</div>";e+="</div>";c+=e}b=document.getElementById("container--parks");b.innerHTML=c;n=b.getElementsByClassName("list-group-item");delete d.parks;""!==q.value&&k()}}})}var u={},r={},l={},q=document.getElementById("filter--searchStr"),n;document.getElementById("form--park-filters").addEventListener("submit",function(d){d.preventDefault();k()});q.addEventListener("keyup",k);var v=["parks","features","parkFeatures"],h=0,d={};m()})();
